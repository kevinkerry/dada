function share(e){wx.onMenuShareTimeline({title:e.desc,link:e.link,imgUrl:e.imgUrl,success:function(){},cancel:function(){}}),wx.onMenuShareAppMessage({title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl,type:"link",dataUrl:"",success:function(){},cancel:function(){}}),wx.onMenuShareQQ({title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl,success:function(){},cancel:function(){}})}(function(){function e(e){var t=new Date(parseFloat(e)),n=t.getMonth()+1;10>n&&(n="0"+n);var a=t.getDate();10>a&&(a="0"+a);var i=t.getHours();10>i&&(i="0"+i);var r=t.getMinutes();return 10>r&&(r="0"+r),n+"-"+a+" "+i+":"+r}function t(){if(!g){var e=new XMLHttpRequest;e.open("POST",ctx+"/luck/lottery?id="+userId),e.onload=function(){var t=JSON.parse(e.responseText);if(5==t.data.luck.id){var n="奖品你好,奖品再见......";document.querySelector("#prizeTitle").innerHTML=n}else{var n="恭喜您抽到一张";switch(t.data.luck.id){case 1:n="恭喜您抽到一件";break;case 2:n="恭喜您抽到一张";break;case 3:n="恭喜您抽到一个";break;case 4:n="恭喜您抽到一张"}document.querySelector("#prizeTitle").innerHTML=n,document.querySelector("#prizeName").innerHTML=t.data.luck.name}setTimeout(function(){document.querySelector("#shake").classList.remove("animate"),o.style.display="block",c.style.transform="translateY(-"+(c.clientHeight+s.clientHeight)+"px)",c.style.webkitTransform="translateY(-"+(c.clientHeight+s.clientHeight)+"px)",o.style.transform="translateY(-"+(c.clientHeight+s.clientHeight)+"px)",o.style.webkitTransform="translateY(-"+(c.clientHeight+s.clientHeight)+"px)"},2e3)},g=!0,e.send()}}var n=new XMLHttpRequest;n.open("GET",ctx+"/luck/getImgData?imgUrl="+imageUrl),n.onload=function(){var e=new Image;e.setAttribute("src",n.responseText),e.addEventListener("load",function(){var t=document.createElement("canvas");t.width=e.naturalWidth,t.height=e.naturalHeight;var n=t.getContext("2d");n.drawImage(e,0,0),document.querySelector("#cutImage").style.backgroundImage="url("+t.toDataURL()+")",t=null,e=null})},n.send();var a=document.querySelector("#lotteryTip");if(currentTime>activityEndTime&&(a.innerHTML="奖品已经抢完成,活动结束"),currentTime<activityStartTime){var i=activityStartTime-currentTime,r=parseInt(i/1e3/60/60/24);if(r>0)a.innerHTML="倒计时<span>"+r+"</span>天";else var l=setInterval(function(){function e(){var e=event.accelerationIncludingGravity;r=e.x,y=e.y,(Math.abs(r-lastX)>n||Math.abs(y-lastY)>n)&&(document.querySelector("#shake").classList.add("animate"),t()),lastX=r,lastY=y}if(0>=i){if(clearInterval(l),a.innerHTML="摇一摇，有惊喜",window.DeviceMotionEvent){var n=25,r=y=z=lastX=lastY=lastZ=0;window.addEventListener("devicemotion",e,!1)}}else{var s=parseInt(i/1e3/60/60);10>s&&(s="0"+s);var c=parseInt(i/1e3/60%60);10>c&&(c="0"+c);var o=parseInt(i/1e3%60);10>o&&(o="0"+o),a.innerHTML="倒计时<span>"+s+":"+c+":"+o+"</span>",i-=1e3}},1e3)}var s=(document.querySelector("#container"),document.querySelector("#page1")),c=document.querySelector("#page2"),o=document.querySelector("#page3");s.style.minHeight=window.innerHeight+"px",c.style.minHeight=window.innerHeight+"px",o.style.minHeight=window.innerHeight+"px";for(var u=document.querySelectorAll(".create-time"),d=0,m=u.length;m>d;d++){var v=u[d].getAttribute("data-time");u[d].innerHTML=e(v)}document.querySelector("#playBtn").addEventListener("click",function(){function e(){var e=event.accelerationIncludingGravity;a=e.x,y=e.y,(Math.abs(a-lastX)>n||Math.abs(y-lastY)>n)&&(document.querySelector("#shake").classList.add("animate"),t()),lastX=a,lastY=y}if("true"==isLottery)return o.style.display="block",s.style.transform="translateY(-100%)",s.style.webkitTransform="translateY(-100%)",o.style.transform="translateY(-"+s.clientHeight+"px)",void(o.style.webkitTransform="translateY(-"+s.clientHeight+"px)");if(c.style.display="block",s.style.transform="translateY(-100%)",s.style.webkitTransform="translateY(-100%)",c.style.transform="translateY(-"+s.clientHeight+"px)",c.style.webkitTransform="translateY(-"+s.clientHeight+"px)",currentTime<=activityEndTime&&currentTime>=activityStartTime)if(window.DeviceMotionEvent){var n=25,a=y=z=lastX=lastY=lastZ=0;window.addEventListener("devicemotion",e,!1)}else setTimeout(function(){t()},3e3)});var g=!1}).apply(window);